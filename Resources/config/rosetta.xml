<?xml version="1.0" ?>

<container xmlns="http://www.symfony-project.org/schema/dic/services"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.symfony-project.org/schema/dic/services http://www.symfony-project.org/schema/dic/services/services-1.0.xsd">
    <parameters>
    	
		<parameter key="rosetta.class">Bundle\RosettaBundle\Service\Rosetta</parameter>
		<parameter key="rosetta.locator.class">Bundle\RosettaBundle\Service\Locator\Locator</parameter>
        <parameter key="rosetta.translator.class">Bundle\RosettaBundle\Service\Translator\Translator</parameter>
        <parameter key="rosetta.importer.class">Bundle\RosettaBundle\Service\Importer\Importer</parameter>
        <parameter key="rosetta.deployer.class">Bundle\RosettaBundle\Service\Deployer\Deployer</parameter>
		<parameter key="rosetta.scanner.class">Bundle\RosettaBundle\Service\Scanner\Scanner</parameter>
		<parameter key="rosetta.live.class">Bundle\RosettaBundle\Service\Live\Live</parameter>
		
		<parameter key="rosetta.config" type="collection">
            <parameter key="locale"></parameter>
			<parameter key="scanners" type="collection">
	            <parameter key="*.php">Bundle\RosettaBundle\Service\Scanner\PhpScanner</parameter>
	            <parameter key="*.twig">Bundle\RosettaBundle\Service\Scanner\TwigScanner</parameter>
	        </parameter>
			<parameter key="translator" type="collection">
                <parameter key="adapter">Bundle\RosettaBundle\Service\Translator\GoogleAdapter</parameter>
                <parameter key="version">2</parameter>
				<parameter key="key"></parameter>
            </parameter>
			<parameter key="rosetta.live" type="collection">
	            <parameter key="enabled">false</parameter>
	            <parameter key="translate">true</parameter>
	            <parameter key="choose">true</parameter>
	        </parameter>
        </parameter>
		
    </parameters>
    <services>
    	
		<service id="rosetta.locator" class="%rosetta.locator.class%">
            <argument>%kernel.root_dir%</argument>
        </service>
		
		<service id="rosetta.translator" class="%rosetta.translator.class%">
			<argument>%rosetta.config%</argument>
        </service>
		
		<service id="rosetta.scanner" class="%rosetta.scanner.class%">
			<argument type="service" id="doctrine.orm.entity_manager" />
			<argument type="service" id="rosetta.locator" />
			<argument>%rosetta.config%</argument>
        </service>
		
		<service id="rosetta.importer" class="%rosetta.importer.class%">
            <argument type="service" id="doctrine.orm.entity_manager" />
			<argument type="service" id="rosetta.locator" />
        </service>
		
		<service id="rosetta.depoyer" class="%rosetta.deployer.class%">
            <argument type="service" id="doctrine.orm.entity_manager" />
            <argument type="service" id="rosetta.locator" />
        </service>
		
    	<service id="rosetta" class="%rosetta.class%">
            <argument type="service" id="rosetta.scanner" />
			<argument type="service" id="rosetta.importer" />
            <argument type="service" id="rosetta.translator" />
            <argument type="service" id="rosetta.deployer" />
			<argument>%rosetta.config%</argument>
        </service>
		
		<service id="rosetta.live" class="%rosetta.live.class%">
            <argument type="service" id="rosetta.translator" />
            <argument type="service" id="rosetta.deployer" />
            <argument>%rosetta.live.config%</argument>
        </service>
		
    </services>
</container>
